{% load package_extras %}
{% extends "base.html" %}
{% block title %}Pkg: {{ pkg.pkgname }} - Arch Linux Package Details{% endblock %}

{% block content %}
    <div class="box">
        <h2 class="title">{{ pkg.pkgname }} {{ pkg.pkgver }}-{{ pkg.pkgrel }}</h2>
        <div style="float:right" class="listing">
            <ul class="small">
                <li><a href="http://repos.archlinux.org/viewvc.cgi/{{ pkg.pkgname }}/repos/{{ pkg.repo.name|lower }}-{{ pkg.arch.name|lower }}/">View SVN Entries</a></li>
                <!-- <li><a href="/packages/files/{{ pkg.id }}/">View File List</a></li> -->
                <li>
            {% if pkg.needupdate %}
                <span style="font-size:x-small"><em>This package has been flagged out-of-date</em></span>
                <br />&nbsp; &nbsp; <a href="/packages/unflag/{{ pkg.id }}/">Click here to unflag</a>
            {% else %}
                <a href="/packages/flag/{{ pkg.id }}/" onclick="return !window.open('/packages/flag/{{ pkg.id }}/','FlagHelp','height=250,width=450,location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=no');">Flag Package Out-of-Date</a>
                <a href="/packages/flaghelp" onclick="return !window.open('/packages/flaghelp','FlagHelp','height=250,width=450,location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=no');"><span style="font-size:x-small">(?)</span></a>
            {% endif %}
                </li>
                <li>&nbsp;</li>
                <li>
                <form name="devaction" method="post" action="/packages/update/">
                    <input type="hidden" name="pkgid" value="{{ pkg.id }}" />
                    <input type="submit" style="background: #e1e3e6;" name="adopt" value="Adopt Package" />
                    <input type="submit" style="background: #e1e3e6;" name="disown" value="Disown Package" />
                </form>
                </li>
            </ul>
        </div>
        <table class="listing">
            <tr>
                <th>Architecture:</th>
                <td>{{ pkg.arch.name }}</td>
            </tr><tr>
                <th>Repository:</th>
                <td>{{ pkg.repo.name|capfirst }}</td>
            </tr><tr>
                <th>Description:</th>
                <td>{{ pkg.pkgdesc }}</td>
            </tr><tr>
                <th>Upstream URL:</th>
                <td><a href="{{ pkg.url }}">{{ pkg.url }}</a></td>
            </tr><tr>
                <th>Maintainer:</th>
                <td>{% if pkg.maintainer %}{{ pkg.maintainer.get_full_name }}{% else %}None{% endif %}</td>
            </tr><tr>
                <th>LastUpdated:</th>
                <td>{{ pkg.last_update|date:"Y-m-d" }}</td>
            </tr>
        </table>
        <br />
        <table width="100%">
            <tr>
                <td valign="top" width="50%">
                    <div class="listing">
                        <h4>Dependencies:</h4>
                        <ul style="font-size:small;list-style:none">
                        {% for depend in pkg.get_depends %}
                          {% ifequal depend.pkg None %}
                            <li>{{ depend.dep.depname }} (virtual)</li>
                          {% else %}
                            <li><a href="/packages/{{ depend.pkg.id }}/">{{ depend.dep.depname }}</a>{{ depend.dep.depvcmp }}</li>
                          {% endifequal %}
                        {% endfor %}
                        </ul>
                    </div>
                </td>
                <td valign="top">
                    <div class="listing">
                        <h4>Required By:</h4>
                        <ul style="font-size:small;list-style:none">
                        {% for req in pkg.get_requiredby %}
                            <li><a href="/packages/{{ req.id }}/">{{ req.pkgname }}{% ifequal req.repo.name "Testing" %} (testing){% endifequal %}{% ifequal req.repo.name "Unstable" %} (unstable){% endifequal %}</a></li>
                        {% endfor %}
                        </ul>
                    </div>
                </td>
            </tr>
        </table>
    </div>
{% endblock %}

