{% extends "base.html" %}

{% block content %}
	{% if todos %}
	<div class="greybox">
		<h3 class="title">Package ToDo Lists</h3>
		<table class="results" width="100%">
			<tr>
				<th>Name</th>
				<th>Creation Date</th>
				<th>Description</th>
			</tr>
		{% for todo in todos %}
            <tr class="{% cycle pkgr2,pkgr1 %}">
				<td style="white-space:nowrap"><a href="/todo/{{ todo.id }}/">{{ todo.name }}</a></td>
				<td>{{ todo.date_added }}</td>
				<td>{{ todo.description }}</td>
			</tr>
		{% endfor %}
		</table>
	</div>
	<br /><br />
	{% endif %}
	
    <div class="greybox">
		<h3 class="title">Stats by Architecture</h3>
		<table class="results" width="100%">
			<tr>
				<th width="50%">Arch</th>
				<th># Packages</th>
				<th># Flagged</th>
			</tr>
		{% for arch in arches %}
            <tr class="{% cycle pkgr2,pkgr1 %}">
				<td><strong>{{ arch.name }}</strong></td>
				<td><a href="/packages/?arch={{ arch.name }}"><strong>{{ arch.packages.count }}</strong> packages</a></td>
				<td><a href="/packages/?arch={{ arch.name }}&flagged=Flagged"><strong>{{ arch.packages.flagged.count }}</strong> packages</a></td>
			</tr>
		{% endfor %}
		</table>
	</div>
	<br /><br />
    <div class="greybox">
		<h3 class="title">Stats by Repository</h3>
		<table class="results" width="100%">
			<tr>
				<th width="50%">Repository</th>
				<th># Packages</th>
				<th># Flagged</th>
			</tr>
		{% for repo in repos %}
            <tr class="{% cycle pkgr2,pkgr1 %}">
				<td><strong>{{ repo.name }}</strong></td>
				<td><a href="/packages/?repo={{ repo.name }}"><strong>{{ repo.packages.count }}</strong> packages</a></td>
				<td><a href="/packages/?repo={{ repo.name }}&flagged=Flagged"><strong>{{ repo.packages.flagged.count }}</strong> packages</a></td>
			</tr>
		{% endfor %}
		</table>
	</div>
	<br /><br />

	<div class="greybox">
		<h3 class="title">Stats by Maintainer</h3>
		<table class="results" width="100%">
			<tr>
				<th width="50%">Maintainer</th>
				<th># Packages</th>
				<th># Flagged</th>
			</tr>
		{% for maint in maintainers %}
            <tr class="{% cycle pkgr2,pkgr1 %}">
				<td><strong>{{ maint.get_full_name }}</strong></td>
				<td><a href="/packages/?maint={{ maint.id }}"><strong>{{ maint.maintained_packages.count }}</strong> packages</a></td>
				<td><a href="/packages/?maint={{ maint.id }}&flagged=Flagged"><strong>{{ maint.maintained_packages.flagged.count }}</strong> packages</a></td>
			</tr>
		{% endfor %}
		</table>
	</div>
	<br /><br />

	<div class="box">
		<h3 class="title">Package Maintenance</h3>
		<br />
		<table width="100%">
			<tr>
				<td style="vertical-align: top">
				{% if maint %}
					<a href="/packages/?maint={{ maint.id }}">My Packages</a><br />
				{% endif %}
					<a href="/packages/?maint=0">Orphan Packages</a><br />
					<br />
					<a
                        href="http://wiki.archlinux.org/index.php/DeveloperWiki:HOWTO_Be_A_Packager">Package Maintainer's Guide</a><br />
				</td><td style="vertical-align: top">
				{% if pkgs %}
					<h4>My Flagged Packages:</h4>
					<ul class="small">
						<li><form method="post" action="/devel/notify/">
							<input name="notify" type="checkbox" value="yes"{% if maint.get_profile.notify %} checked{% endif %} /> Notify me when packages are flagged
							&nbsp; &nbsp;
							<input type="submit" value="Update" />
						</form></li>
					</ul>
					<ul class="small">
					{% for pkg in pkgs %}
						<li><a href="/packages/{{ pkg.id }}/">{{ pkg.repo.name }}::{{ pkg.pkgname }} &nbsp; &nbsp; {{ pkg.pkgver }} &nbsp; &nbsp; {{ pkg.arch.name }}</a></li>
					{% endfor %}
					</ul>
				{% endif %}
				</td>	
			</tr>
		</table>
{% endblock %}
